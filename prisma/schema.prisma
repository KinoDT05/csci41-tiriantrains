enum Gender_enum {
  Male
  Female
  Others
}

enum Train_Type_enum {
  A
  S
}

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("PRISMA_DATABASE_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL") // uses a direct connection
}

model User {
  cutomerID Int         @id @default(autoincrement())
  givenName String
  lastName  String
  gender    Gender_enum @default(Others)

  @@map(name: "users")
}

model TrainModel {
  modelID             Int             @id @default(autoincrement())
  trainType           Train_Type_enum
  noSeats             Int             @default(100)
  noToilets           Int             @default(0)
  hasRecliningSeats   Boolean         @default(false)
  hasFoldingTables    Boolean         @default(false)
  hasDisabilityAccess Boolean         @default(false)
  hasLuggageStorage   Boolean         @default(false)
  hasVendingMachines  Boolean         @default(false)
  hasFoodService      Boolean         @default(false)
  trains              Train[]
}

model Train {
  trainID              Int                  @id @unique @default(autoincrement())
  trainModelID         Int
  trainModel           TrainModel           @relation(fields: [trainModelID], references: [modelID])
  maintenanceHistories MaintenanceHistory[]
}

model Crew {
  crewName             String               @id
  inCharge             String
  maintenanceHistories MaintenanceHistory[]
}

model MaintenanceHistory {
  date              DateTime
  maintainedTrainID Int
  maintainer        String
  task              String
  crewAssigned      Crew     @relation(fields: [maintainer], references: [crewName])
  trainMaintained   Train    @relation(fields: [maintainedTrainID], references: [trainID])

  @@id([date, maintainedTrainID, maintainer])
}

